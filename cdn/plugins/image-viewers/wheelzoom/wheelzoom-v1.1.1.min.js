
/*!
	Wheelzoom 1.1.1
	license: MIT
	https://luperi.github.io/wheelzoom/
*/
(function(){function a(c,d){d=d||{bubbles:false,cancelable:false,detail:undefined};var b=document.createEvent("CustomEvent");b.initCustomEvent(c,d.bubbles,d.cancelable,d.detail);return b}a.prototype=window.Event.prototype;window.CustomEvent=a})();window.triggerEvent=function(d,a,f){if(f){var c=new CustomEvent(a,{detail:f})}else{try{var c=new Event(a)}catch(b){var c=new CustomEvent(a)}}return d.dispatchEvent(c,f)};window.wheelzoom=(function(){var c={zoom:0.1,maxZoom:-1};var b=document.createElement("canvas");var a=function(B,g){if(!B||!B.nodeName||B.nodeName!=="IMG"){return}var w={};var p;var o;var i;var u;var e;var d;var q;var z;var l;var j;function r(t){t.style.backgroundImage='url("'+t.src+'")';t.style.backgroundRepeat="no-repeat";b.width=t.naturalWidth;b.height=t.naturalHeight;z=b.toDataURL();t.src=z}function n(){if(e>0){e=0}else{if(e<p-i){e=p-i}}if(d>0){d=0}else{if(d<o-u){d=o-u}}B.style.backgroundSize=i+"px "+u+"px";B.style.backgroundPosition=e+"px "+d+"px"}function y(){i=p;u=o;e=d=0;n()}B.doZoomIn=function(t){if(typeof t==="undefined"){t=false}A(-100,t)};B.doZoomOut=function(t){if(typeof t==="undefined"){t=false}A(100,t)};function A(E,D){if(typeof D==="undefined"){D=false}var C=B.width/2;var I=B.height/2;var H=C-e;var F=I-d;var t=H/i;var G=F/u;if(E<0){if(w.maxZoom==-1||(i+i*w.zoom)/p<=w.maxZoom){i+=i*w.zoom;u+=u*w.zoom}}else{i-=i*w.zoom;u-=u*w.zoom}e=C-(i*t);d=I-(u*G);if(D){if(E<0){setTimeout(function(){triggerEvent(B,"wheelzoom.in",{zoom:i/p,bgPosX:e,bgPosY:d})},10)}else{setTimeout(function(){triggerEvent(B,"wheelzoom.out",{zoom:i/p,bgPosX:e,bgPosY:d})},10)}}if(i<=p||u<=o){triggerEvent(B,"wheelzoom.reset")}else{n()}}function f(C){var t=0;C.preventDefault();if(C.deltaY){t=C.deltaY}else{if(C.wheelDelta){t=-C.wheelDelta}}if(t<0){B.doZoomIn(true)}else{B.doZoomOut(true)}}B.doDrag=function(t,C){e=t;d=C;n()};function s(C){C.preventDefault();var F=C.pageX-q.pageX;var D=C.pageY-q.pageY;var t=e+F;var E=d+D;B.doDrag(t,E);triggerEvent(B,"wheelzoom.drag",{bgPosX:e,bgPosY:d,xShift:F,yShift:D});q=C;n()}function v(){triggerEvent(B,"wheelzoom.dragend",{x:e-l,y:d-j});document.removeEventListener("mouseup",v);document.removeEventListener("mousemove",s)}function h(t){triggerEvent(B,"wheelzoom.dragstart");t.preventDefault();q=t;document.addEventListener("mousemove",s);document.addEventListener("mouseup",v)}function k(){if(B.src===z){return}var t=window.getComputedStyle(B,null);p=parseInt(t.width,10);o=parseInt(t.height,10);i=p;u=o;e=d=l=j=0;r(B);B.style.backgroundSize=p+"px "+o+"px";B.style.backgroundPosition="0 0";B.addEventListener("wheelzoom.reset",y);B.addEventListener("wheelzoom.destroy",x);B.addEventListener("wheel",f);B.addEventListener("mousedown",h)}var x=function(t){B.removeEventListener("wheelzoom.destroy",x);B.removeEventListener("wheelzoom.reset",y);B.removeEventListener("mouseup",v);B.removeEventListener("mousemove",s);B.removeEventListener("mousedown",h);B.removeEventListener("wheel",f);B.style.backgroundImage=t.backgroundImage;B.style.backgroundRepeat=t.backgroundRepeat;B.src=t.src}.bind(null,{backgroundImage:B.style.backgroundImage,backgroundRepeat:B.style.backgroundRepeat,src:B.src});g=g||{};Object.keys(c).forEach(function(t){w[t]=typeof g[t]!=="undefined"?g[t]:c[t]});var m=setInterval(function(){if(B.complete){k()}clearInterval(m)},100)};if(typeof window.getComputedStyle!=="function"){return function(d){return d}}else{return function(f,d){if(f&&f.length){for(var e=0;e<f.length;e++){a(f[e],d)}}else{if(f&&f.nodeName){a(f,d)}}return f}}}());