<script type='text/javascript' src='https://ershakiransari.github.io/cdn/jquery/jquery-v3.3.1.min.js'></script>
<script type='text/javascript' src='https://ershakiransari.github.io/cdn/typed-js/typed-v2.0.9.min.js'></script>
<script type='text/javascript' src='https://ershakiransari.github.io/cdn/bootstrap/bootstrap-v4.3.1.min.js'></script>
<script>
	var typed = new Typed("#typed", {strings: ['NO WARRANTY EXPRESSED OR IMPLIED.', 'USE AT YOUR OWN RISK.', 'USE YOUR OWN COPY.', 'IT IS EXTREMELY UNWISE TO LOAD CODE FROM SERVERS YOU DO NOT CONTROL.'], typeSpeed: 30, backSpeed: 30, backDelay: 5000, startDelay: 1000, loop: true, cursorChar: '_'});
	var SEARCH_RESULT_SELECT = $('#idSelectResultSize');

	function genResultSize()
	{
		let str = "";
		for (let i = 1; i <= 5; i++)
		{
			str += "<option value='" + (i * 10) + "'>" + (i * 10) + "</option>";
		}
		SEARCH_RESULT_SELECT.html('').html(str);
	}
	genResultSize();

	function copyAsHtml(text)
	{
		let textLowerCase = text.toLowerCase();
		if (text.endsWith(".css"))
		{
			text = "<link rel='stylesheet' type='text/css' href='" + text + "'>";
		} else if (text.endsWith(".js"))
		{
			text = "<script type='text/javascript' src='" + text + "'></script" + ">";
		} else if (textLowerCase.endsWith(".jpeg") ||
				  textLowerCase.endsWith(".jpg") ||
				  textLowerCase.endsWith(".gif") ||
				  textLowerCase.endsWith(".png"))
		{
			text = "<img '" + text + "' alt='" + text.substring(text.lastIndexOf("/") + 1, text.length) + "' />";
		}
		window.prompt("Copy to clipboard: Ctrl+C, Enter", text);
	}

	function copy(url)
	{
		window.prompt("Copy to clipboard: Ctrl+C, Enter", url);
	}

	function search(THIS)
	{
		let searchResultSize = SEARCH_RESULT_SELECT.val();
		var query = $(THIS).val();
		if (query === "")
		{
			$('#idDivSearchResult').empty();
			return false;
		}

		var lableStr = "", subQueries = query.split(" "), matchCount = 0;
		for (let i = 0; i < files.length; i++)
		{
			let matchFound = true;
			for (let j = 0; j < subQueries.length; j++)
			{
				if (files[i].indexOf(subQueries[j]) === -1)
				{
					matchFound = false;
					break;
				}
			}

			if (matchFound)
			{
				lableStr += createLable(files[i]);
				++matchCount;
			}

			if (matchCount == searchResultSize)
			{
				break;
			}
		}

		lableStr = lableStr.length === 0 ? "<br>No data found!" : lableStr;

		$('#idDivSearchResult').empty().html(lableStr);
	}

	function createLable(fileName)
	{
		var url = "https://ershakiransari.github.io/cdn/" + fileName;
		var str = "";
		str += "<label class='px-2 my-2'>";
		str += "<i class='fa fa-copy' title='Copy to clipboard' onclick=\"copy('" + url + "')\"></i> ";
		str += "<i class='fa fa-clipboard' title='Copy to clipboard as HTML' onclick=\"copyAsHtml('" + url + "')\"></i> ";
		str += "<a href='" + url + "' target='_blank'>" + url + "</a>";
		str += "</label>";
		return str;
	}

</script>
</body>
</html>
